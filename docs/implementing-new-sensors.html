<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Implementing new sensors | WildlifeSystems - biodiversity technologies</title>
  <meta name="description" content="Manual for using WildlifeSystems technologies for monitoring biodiversity." />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Implementing new sensors | WildlifeSystems - biodiversity technologies" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Manual for using WildlifeSystems technologies for monitoring biodiversity." />
  <meta name="github-repo" content="wildlife-systems/docs.wildlife.systems" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Implementing new sensors | WildlifeSystems - biodiversity technologies" />
  
  <meta name="twitter:description" content="Manual for using WildlifeSystems technologies for monitoring biodiversity." />
  

<meta name="author" content="Ed Baker" />


<meta name="date" content="2022-12-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sensors-in-wildlifesystems.html"/>
<link rel="next" href="sound-devices.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Wildlife Systems Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#support"><i class="fa fa-check"></i>Support</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="biodiversity-technologies.html"><a href="biodiversity-technologies.html"><i class="fa fa-check"></i><b>1</b> Biodiversity Technologies</a>
<ul>
<li class="chapter" data-level="1.1" data-path="biodiversity-technologies.html"><a href="biodiversity-technologies.html#structure-of-wildlife-systems"><i class="fa fa-check"></i><b>1.1</b> Structure of Wildlife Systems</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="biodiversity-technologies.html"><a href="biodiversity-technologies.html#overall-philosophy"><i class="fa fa-check"></i><b>1.1.1</b> Overall Philosophy</a></li>
<li class="chapter" data-level="1.1.2" data-path="biodiversity-technologies.html"><a href="biodiversity-technologies.html#packages"><i class="fa fa-check"></i><b>1.1.2</b> Packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sensor-networks.html"><a href="sensor-networks.html"><i class="fa fa-check"></i><b>2</b> Sensor Networks</a></li>
<li class="chapter" data-level="3" data-path="environmental-sensors.html"><a href="environmental-sensors.html"><i class="fa fa-check"></i><b>3</b> Environmental Sensors</a>
<ul>
<li class="chapter" data-level="3.1" data-path="environmental-sensors.html"><a href="environmental-sensors.html#how-sensors-work"><i class="fa fa-check"></i><b>3.1</b> How sensors work</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="environmental-sensors.html"><a href="environmental-sensors.html#temperature"><i class="fa fa-check"></i><b>3.1.1</b> Temperature</a></li>
<li class="chapter" data-level="3.1.2" data-path="environmental-sensors.html"><a href="environmental-sensors.html#humidity"><i class="fa fa-check"></i><b>3.1.2</b> Humidity</a></li>
<li class="chapter" data-level="3.1.3" data-path="environmental-sensors.html"><a href="environmental-sensors.html#air-pressure"><i class="fa fa-check"></i><b>3.1.3</b> Air Pressure</a></li>
<li class="chapter" data-level="3.1.4" data-path="environmental-sensors.html"><a href="environmental-sensors.html#gases"><i class="fa fa-check"></i><b>3.1.4</b> Gases</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sensors-in-wildlifesystems.html"><a href="sensors-in-wildlifesystems.html"><i class="fa fa-check"></i><b>4</b> Sensors in WildlifeSystems</a>
<ul>
<li class="chapter" data-level="4.1" data-path="sensors-in-wildlifesystems.html"><a href="sensors-in-wildlifesystems.html#sensors-included-in-the-base-system"><i class="fa fa-check"></i><b>4.1</b> Sensors included in the base system</a></li>
<li class="chapter" data-level="4.2" data-path="sensors-in-wildlifesystems.html"><a href="sensors-in-wildlifesystems.html#installing-sensor-support"><i class="fa fa-check"></i><b>4.2</b> Installing sensor support</a></li>
<li class="chapter" data-level="4.3" data-path="sensors-in-wildlifesystems.html"><a href="sensors-in-wildlifesystems.html#reading-data-from-a-sensor"><i class="fa fa-check"></i><b>4.3</b> Reading data from a sensor</a></li>
<li class="chapter" data-level="4.4" data-path="sensors-in-wildlifesystems.html"><a href="sensors-in-wildlifesystems.html#the-sensor-reading-process"><i class="fa fa-check"></i><b>4.4</b> The sensor reading process</a></li>
<li class="chapter" data-level="4.5" data-path="sensors-in-wildlifesystems.html"><a href="sensors-in-wildlifesystems.html#installing-new-sensors"><i class="fa fa-check"></i><b>4.5</b> Installing new sensors</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="implementing-new-sensors.html"><a href="implementing-new-sensors.html"><i class="fa fa-check"></i><b>5</b> Implementing new sensors</a>
<ul>
<li class="chapter" data-level="5.1" data-path="implementing-new-sensors.html"><a href="implementing-new-sensors.html#reading-the-sensor"><i class="fa fa-check"></i><b>5.1</b> Reading the sensor</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="implementing-new-sensors.html"><a href="implementing-new-sensors.html#in-bash"><i class="fa fa-check"></i><b>5.1.1</b> In bash</a></li>
<li class="chapter" data-level="5.1.2" data-path="implementing-new-sensors.html"><a href="implementing-new-sensors.html#in-python"><i class="fa fa-check"></i><b>5.1.2</b> In Python</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="implementing-new-sensors.html"><a href="implementing-new-sensors.html#setting-the-environment"><i class="fa fa-check"></i><b>5.2</b> Setting the environment</a></li>
<li class="chapter" data-level="5.3" data-path="implementing-new-sensors.html"><a href="implementing-new-sensors.html#install"><i class="fa fa-check"></i><b>5.3</b> Install</a></li>
<li class="chapter" data-level="5.4" data-path="implementing-new-sensors.html"><a href="implementing-new-sensors.html#the-installation-process-with-si"><i class="fa fa-check"></i><b>5.4</b> The installation process with <code>si</code></a></li>
<li class="chapter" data-level="5.5" data-path="implementing-new-sensors.html"><a href="implementing-new-sensors.html#submitting-packages-to-wildlifesystems"><i class="fa fa-check"></i><b>5.5</b> Submitting packages to WildlifeSystems</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sound-devices.html"><a href="sound-devices.html"><i class="fa fa-check"></i><b>6</b> Sound Devices</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sound-devices.html"><a href="sound-devices.html#how-sound-devices-work"><i class="fa fa-check"></i><b>6.1</b> How sound devices work</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sound-devices-in-wildlifesystems.html"><a href="sound-devices-in-wildlifesystems.html"><i class="fa fa-check"></i><b>7</b> Sound devices in WildlifeSystems</a></li>
<li class="chapter" data-level="8" data-path="imaging-devices.html"><a href="imaging-devices.html"><i class="fa fa-check"></i><b>8</b> Imaging Devices</a>
<ul>
<li class="chapter" data-level="8.1" data-path="imaging-devices.html"><a href="imaging-devices.html#how-imaging-devices-work"><i class="fa fa-check"></i><b>8.1</b> How imaging devices work</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="imaging-devices-in-wildlifesystems.html"><a href="imaging-devices-in-wildlifesystems.html"><i class="fa fa-check"></i><b>9</b> Imaging devices in WildlifeSystems</a></li>
<li class="chapter" data-level="10" data-path="power-management.html"><a href="power-management.html"><i class="fa fa-check"></i><b>10</b> Power Management</a>
<ul>
<li class="chapter" data-level="10.1" data-path="power-management.html"><a href="power-management.html#installation-of-power-management-tools"><i class="fa fa-check"></i><b>10.1</b> Installation of power management tools</a></li>
<li class="chapter" data-level="10.2" data-path="power-management.html"><a href="power-management.html#turning-funtionality-on-and-off"><i class="fa fa-check"></i><b>10.2</b> Turning funtionality on and off</a></li>
<li class="chapter" data-level="10.3" data-path="power-management.html"><a href="power-management.html#considerations"><i class="fa fa-check"></i><b>10.3</b> Considerations</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="developer-guidelines.html"><a href="developer-guidelines.html"><i class="fa fa-check"></i><b>11</b> Developer Guidelines</a>
<ul>
<li class="chapter" data-level="11.1" data-path="developer-guidelines.html"><a href="developer-guidelines.html#documentation"><i class="fa fa-check"></i><b>11.1</b> Documentation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">WildlifeSystems - biodiversity technologies</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="implementing-new-sensors" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Implementing new sensors<a href="implementing-new-sensors.html#implementing-new-sensors" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>New sensors should be implemented as new packages (i.e, a new GitHub repository). Packages have a standard format, and should be named <code>sensor-&lt;sensor-name&gt;</code> where <code>&lt;sensor-name&gt;</code> is short, descriptive of the sensor (e.g. model number), and unique within the WildlifeSystems ecosystem.</p>
<p>The structure of a basic package is given below.</p>
<pre><code>.
+-- inst
|   +-- files that are not part of the package structure
|       used during installation (e.g. 3rd party scripts 
|       to be copied to /usr/bin/)
|
+-- sensor-&lt;sensor-name&gt;
|     Executable to read sensor and print JSON of readings
|     (copied on install to /usr/bin/)
|
+-- &lt;sensor-name&gt;
|     Configuration file 
|     (copied on install to /var/aao/sensors/)
|
+-- install
|     Bash file run once on install - used to install packaged
|     dependencies, etc.</code></pre>
<p>As many people implement various sensors on the Raspberry Pi, it is likely that some sort of solution is already available, that can be tweaked to output readings in the standard format required. However, you must ensure that any licensing conditions are met. In particular, an open license is required if submitting your sensor package to WildlifeSystems for inclusion in the ecosystem.</p>
<div id="reading-the-sensor" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Reading the sensor<a href="implementing-new-sensors.html#reading-the-sensor" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>File <code>sensor-&lt;sensor-name&gt;</code> provides the functionality to read the protoype JSON, populate the JSON with sensor readings, and print the output.</p>
<p>The file can be written in any programming or scripting language, but to prevent overhead consideration should be given to minimising the number of new packages installed.</p>
<div id="in-bash" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> In bash<a href="implementing-new-sensors.html#in-bash" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="implementing-new-sensors.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb5-2"><a href="implementing-new-sensors.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="implementing-new-sensors.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the prototype JSON</span></span>
<span id="cb5-4"><a href="implementing-new-sensors.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="va">JSON</span><span class="op">=</span><span class="va">$(</span><span class="ex">sc-prototype</span><span class="va">)</span></span>
<span id="cb5-5"><a href="implementing-new-sensors.html#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="implementing-new-sensors.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="at">-n</span> <span class="st">&quot;[&quot;</span></span>
<span id="cb5-7"><a href="implementing-new-sensors.html#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="implementing-new-sensors.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Code to read the sensor value into GPU_TEMP</span></span>
<span id="cb5-9"><a href="implementing-new-sensors.html#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="implementing-new-sensors.html#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `jq` to modify JSON</span></span>
<span id="cb5-11"><a href="implementing-new-sensors.html#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="va">SENSOR</span><span class="op">=</span><span class="va">$(</span><span class="bu">echo</span> <span class="va">$JSON</span> <span class="kw">|</span> <span class="ex">jq</span> <span class="st">&quot;.sensor |= </span><span class="dt">\&quot;</span><span class="st">onboard_gpu</span><span class="dt">\&quot;</span><span class="st"> | .measures |= </span><span class="dt">\&quot;</span><span class="st">temperature</span><span class="dt">\&quot;</span><span class="st"> | .unit |= </span><span class="dt">\&quot;</span><span class="st">Celsius</span><span class="dt">\&quot;</span><span class="st">| .value |= </span><span class="va">${GPU_TEMP}</span><span class="st">&quot;</span><span class="va">)</span></span>
<span id="cb5-12"><a href="implementing-new-sensors.html#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="at">-n</span> <span class="va">$SENSOR</span></span>
<span id="cb5-13"><a href="implementing-new-sensors.html#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="implementing-new-sensors.html#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;]&quot;</span></span></code></pre></div>
</div>
<div id="in-python" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> In Python<a href="implementing-new-sensors.html#in-python" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="implementing-new-sensors.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/</span></span>
<span id="cb6-2"><a href="implementing-new-sensors.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb6-3"><a href="implementing-new-sensors.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb6-4"><a href="implementing-new-sensors.html#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="implementing-new-sensors.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the prototype JSON</span></span>
<span id="cb6-6"><a href="implementing-new-sensors.html#cb6-6" aria-hidden="true" tabindex="-1"></a>stream <span class="op">=</span> os.popen(<span class="st">&#39;sc-prototype&#39;</span>)</span>
<span id="cb6-7"><a href="implementing-new-sensors.html#cb6-7" aria-hidden="true" tabindex="-1"></a>output <span class="op">=</span> stream.read()</span>
<span id="cb6-8"><a href="implementing-new-sensors.html#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="implementing-new-sensors.html#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Pre-populate with sensor metadata</span></span>
<span id="cb6-10"><a href="implementing-new-sensors.html#cb6-10" aria-hidden="true" tabindex="-1"></a>temperature <span class="op">=</span> json.loads(output)</span>
<span id="cb6-11"><a href="implementing-new-sensors.html#cb6-11" aria-hidden="true" tabindex="-1"></a>temperature[<span class="st">&quot;sensor&quot;</span>] <span class="op">=</span> <span class="st">&quot;bme680_temperature&quot;</span></span>
<span id="cb6-12"><a href="implementing-new-sensors.html#cb6-12" aria-hidden="true" tabindex="-1"></a>temperature[<span class="st">&quot;measures&quot;</span>] <span class="op">=</span> <span class="st">&quot;temperature&quot;</span></span>
<span id="cb6-13"><a href="implementing-new-sensors.html#cb6-13" aria-hidden="true" tabindex="-1"></a>temperature[<span class="st">&quot;unit&quot;</span>] <span class="op">=</span> <span class="st">&quot;Celsius&quot;</span></span>
<span id="cb6-14"><a href="implementing-new-sensors.html#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="implementing-new-sensors.html#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Code to read sensor and output in variable `sensor_reading`</span></span>
<span id="cb6-16"><a href="implementing-new-sensors.html#cb6-16" aria-hidden="true" tabindex="-1"></a>temperature[<span class="st">&quot;value&quot;</span>] <span class="op">=</span> sensor_reading</span>
<span id="cb6-17"><a href="implementing-new-sensors.html#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="implementing-new-sensors.html#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Output the JSON in an array</span></span>
<span id="cb6-19"><a href="implementing-new-sensors.html#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;[&quot;</span>,json.dumps(temperature),<span class="st">&quot;]&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="setting-the-environment" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Setting the environment<a href="implementing-new-sensors.html#setting-the-environment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The file <code>&lt;sensor-name&gt;</code> in the package specifies information that modify the environment of the Raspberry Pi (e.g. if the i2c interface should be enabled) before the <code>sensor-&lt;sensor-name&gt;</code> script is run. This allows sensors with different requirements to run sequentially on the same node.</p>
<p>The file must always be present, even if it is empty. During installation the file is moved to <code>/var/aao/sensors/</code> and the list of files in this directory indicates to the system which sensors are installed.</p>
<p>TODO: i2c</p>
</div>
<div id="install" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Install<a href="implementing-new-sensors.html#install" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The file <code>install</code> in the directory is run once, when the sensor package is installed. This allows for the installation of packages and scripts necessary for the functioning of the package.</p>
<p>The file is executed by <code>bash</code> and the use of <code>sudo</code> is allowed.</p>
</div>
<div id="the-installation-process-with-si" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> The installation process with <code>si</code><a href="implementing-new-sensors.html#the-installation-process-with-si" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The sensor install script, <code>si</code>, from <code>sensor-control</code> is used to install sensor packages. For developer reference the installation process is described below.</p>
<ol style="list-style-type: decimal">
<li><p><code>si</code> clones the <code>Wildlife-Systems/sensor-&lt;sensor-name&gt;</code> repository from GitHub.</p></li>
<li><p>The <code>install</code> script is executed.</p></li>
<li><p><code>sensor-&lt;sensor-name</code> is marked as executable and move to /usr/bin/.</p></li>
<li><p><code>&lt;sensor-name&gt;</code> is moved to /var/aao/sensors/.</p></li>
<li><p>The cloned repository is removed from the local filesystem.</p></li>
</ol>
</div>
<div id="submitting-packages-to-wildlifesystems" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Submitting packages to WildlifeSystems<a href="implementing-new-sensors.html#submitting-packages-to-wildlifesystems" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Submitting packages (where licensing allows) to WildlifeSystems allows the ecosystem to be developed and sustained collaboratively by the user community.</p>
<p>Packages can be sent to the administrators as a compressed file, or a request can be sent to fork an existing GitHub repository. Contact details can be found at <a href="https://wildlife.systems/contact.html">https://wildlife.systems/contact.html</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sensors-in-wildlifesystems.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sound-devices.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Wildlife-Systems/docs.wildlife.systems/edit/master/05-new-sensors.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
